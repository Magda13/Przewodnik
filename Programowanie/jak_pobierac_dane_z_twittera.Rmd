# Jak pobierać dane z Twittera?

Twitter udostępnia dwa API do pobierania danych.

* API do odczytywania historycznych wiadomości pasujących do określonego wzorca,
* API do aktywnego nasłuchiwania strumienia wiadomości pasujących do określonego wzorca (otrzymujemy zaledwie wycinek całego API).

Omówimy poniżej oba API.

## Autoryzacja z API Twittera

Aby móc automatycznie pobierać dane z Twittera należy ze strony https://apps.twitter.com pobrać klucze `Access Token` i `Access Token Secret`. 

Następnie, używając funkcji `setup_twitter_oauth()` należy autoryzować program R do pobierania danych. Poniżej klucze są wykropkowane, należy pobrać własne klucze z www strony.

```{r, eval=FALSE}
library(twitteR)

consumerKey <- "..................................."
consumerSecret <- "..................................."
access_token <- "..................................."
access_secret <- "..................................."

setup_twitter_oauth(consumerKey, consumerSecret, access_token, access_secret)
```

```
## [1] "Using direct authentication"
```

## Czytanie z historii Twittera

Po autoryzacji można dane pobrać używając funkcji `searchTwitter()`. Pierwszy argument określa słowa kluczowe, które będą wyszukiwane. Drugi argument określa ile wiadomości ma być pobranych. Kolejne argumenty pozwalają na dookreślenie, czy wiadomości mają być pobierane z określonego okresu czasu, czy określonej lokalizacji.

Wynikiem funkcji `searchTwitter()` jest lista obiektów opisujących wiadomości. Do analizy wygodniej jest tą listę zamienić na tabelę danych. Można to zrobić funkcją `twListToDF`. 

Poniższy przykład pobiera z Twittera 10 wiadomości zawierających słowo `chopin`. Następnie wynik zamienia na tabelę danych i wyświetla z tej tabeli trzy kolumny (numer, datę utworzenia i treść wiadomości).

```{r, eval=FALSE}
library(twitteR)
tweets <- searchTwitter("chopin", n=10)

dftweets <- twListToDF(tweets)
dftweets[,c("id", "created", "text")]
```

```
##                    id             created
## 1  703739618911502336 2016-02-28 00:32:54
## 2  703739332004216832 2016-02-28 00:31:46
## 3  703739324530081792 2016-02-28 00:31:44
## 4  703739032912732161 2016-02-28 00:30:34
## 5  703738659376373761 2016-02-28 00:29:05
## 6  703738344790839296 2016-02-28 00:27:50
## 7  703738246484914176 2016-02-28 00:27:27
## 8  703737940330070016 2016-02-28 00:26:14
## 9  703737600650059776 2016-02-28 00:24:53
## 10 703737487211032577 2016-02-28 00:24:26
##                                                                                                                                                                                                                                                                                     text
## 1                                                                                                                                                             RT @PGENarodowy: Kings On Ice. Tribute to Chopin już za nami! Dziękujemy Wam za wspólną zabawę :-) https://t.co/W2qlCuMC7i
## 2                                                                                                                                                                Relájense con \xed\xae\xba\xed\xb0\x97\xed\xae\xba\xed\xb0\x99\xed\xa0\xbc\xed\xbc\xb3  #chopin https://t.co/dzBLYJONrG
## 3  This Guy Perfectly Explains How to Recognize The Artist Of A Painting. He do indeed %%robert\xed\xa0\xbc\xed\xbe\x93\xed\xa0\xbd\xed\xb3\x9a\xed\xa0\xbc\xed\xbe\xb9\xed\xa0\xbc\xed\xbf\x9b\xed\xa0\xbc\xed\xbe\xa8\xed\xa0\xbc\xed\xbe\xa8 H/t @good_mewls  https://t.co/D4dmLgo9el
## 4                                                                                                                                               Friday night spent sleeping with a sausage dog curled up under my bed. Saturday night and I'm listening to Chopin on Myleen Klass' show.
## 5                                                                                                                                                                           #Chopin : Variations sur "La ci darem la mano" - N.Goerner / Orch du 18è siècle / F.Brüggen .#classicalmusic
## 6                                                                                                                                                                                やっぱり、もうちょいお絵描き！モイ！iPhoneからキャス配信中 - / 少しだけお絵描き https://t.co/ka3JGQmy75
## 7                                                                                                                                                                                                                               #INTL Suggest me the classic(s) instrument? Chopin, etc.
## 8                                                                                                                                                                                                           I liked a @YouTube video https://t.co/UkfHyvjzCb Chopin Sonata op.65 1st mvt
## 9                                                                                                                                                                                                            Chopin Funeral March (Arr. for Organ) https://t.co/K4pr8QkL6f 來自 @YouTube
## 10                                                                                                                                                                                                                     Pour travailler, se concentrer et tout, Chopin c'grave un bon ami
```

## Strumień wiadomości




